<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Donation System - Home</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Hero Section with Login/Register -->
    <section class="landing-hero">
        <div class="hero-overlay">
            <div class="hero-content">
                <div class="hero-logo">ü©∏</div>
                <h1>Blood Donation Management System</h1>
                <p class="hero-subtitle">Save Lives. Donate Blood. Be a Hero.</p>
                <p class="hero-description">Connect with donors and recipients instantly. Every drop counts.</p>
                
                <div class="hero-actions">
                    <a href="login.html" class="btn btn-hero btn-primary">
                        üîê Login
                    </a>
                    <a href="user-register.html" class="btn btn-hero btn-secondary">
                        üìù Create Account
                    </a>
                </div>

                <div class="hero-stats">
                    <div class="stat-box">
                        <span class="stat-number" id="totalDonors">0</span>
                        <span class="stat-label">Registered Donors</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-number" id="totalRequests">0</span>
                        <span class="stat-label">Active Requests</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-number">24/7</span>
                        <span class="stat-label">Available</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
        <div class="container">
            <h2>Why Choose Us?</h2>
            <div class="features-grid">
                <div class="feature-box">
                    <div class="feature-icon">‚ù§Ô∏è</div>
                    <h3>Save Lives</h3>
                    <p>One donation can save up to three lives</p>
                </div>
                <div class="feature-box">
                    <div class="feature-icon">üîç</div>
                    <h3>Quick Search</h3>
                    <p>Find donors instantly by blood group and location</p>
                </div>
                <div class="feature-box">
                    <div class="feature-icon">üîê</div>
                    <h3>Secure Platform</h3>
                    <p>Your data is safe with encrypted authentication</p>
                </div>
                <div class="feature-box">
                    <div class="feature-icon">üì±</div>
                    <h3>Easy Management</h3>
                    <p>Manage donors and requests from one dashboard</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2024 Blood Donation Management System. All rights reserved.</p>
    </footer>

    <script>
        // Load statistics
        window.addEventListener('DOMContentLoaded', async () => {
            try {
                const donorResponse = await fetch('http://localhost:3000/search-donors');
                const donorData = await donorResponse.json();
                document.getElementById('totalDonors').textContent = donorData.count || 0;

                const requestResponse = await fetch('http://localhost:3000/get-requests');
                const requestData = await requestResponse.json();
                document.getElementById('totalRequests').textContent = requestData.count || 0;
            } catch (error) {
                console.error('Error loading stats:', error);
            }

            // Check if already logged in
            try {
                const response = await fetch('http://localhost:3000/api/auth/check', {
                    credentials: 'include'
                });
                const data = await response.json();
                
                if (data.authenticated) {
                    window.location.href = 'dashboard.html';
                }
            } catch (error) {
                console.error('Auth check error:', error);
            }
        });
    </script>
</body>
</html>